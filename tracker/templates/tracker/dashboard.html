{% extends "tracker/base.html" %}

{% block content %}

<div class="container mt-4">
    <h2>Dashboard</h2>

    <div class="summary my-4">
        <h3>Your Financial Overview</h3>
        <p><strong>Total Income:</strong> ${{ total_income }}</p>
        <p><strong>Total Expenses:</strong> ${{ total_expenses }}</p>
        <p><strong>Balance:</strong> ${{ balance }}</p>
    </div>

    <div class="my-4">
        <a href="{% url 'add_income' %}" class="btn btn-primary">Add Income</a>
        <a href="{% url 'view_incomes' %}" class="btn btn-secondary">View Income</a>
        <a href="{% url 'add_expense' %}" class="btn btn-danger">Add Expense</a>
        <a href="{% url 'view_expenses' %}" class="btn btn-warning">View Expenses</a>
        <a href="{% url 'add_emi' %}" class="btn btn-info">Add EMI</a> 
    </div>

    <div class="my-4">
        <h3>Recent Income</h3>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Amount</th>
                    <th>Category</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                {% for income in incomes %}
                    <tr>
                        <td>{{ income.date }}</td>
                        <td>${{ income.amount }}</td>
                        <td>{{ income.category }}</td>
                        <td>{{ income.description }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4">No income recorded yet.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="my-4">
        <h3>Recent Expenses</h3>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Amount</th>
                    <th>Category</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                {% for expense in expenses %}
                    <tr>
                        <td>{{ expense.date }}</td>
                        <td>${{ expense.amount }}</td>
                        <td>{{ expense.category }}</td>
                        <td>{{ expense.description }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4">No expenses recorded yet.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="my-4">
        <h3>Recent EMIs</h3>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Due Date</th>
                    <th>Amount</th>
                    <th>Category</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                {% for emi in emis %}
                    <tr>
                        <td>{{ emi.due_date }}</td>
                        <td>${{ emi.amount }}</td>
                        <td>{{ emi.category }}</td>
                        <td>{{ emi.description }}</td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="4">No EMI recorded yet.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
